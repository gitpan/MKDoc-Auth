<html
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:petal="http://purl.org/petal/1.0/"
  petal:define="login_p   plugin: MKDoc::Auth::Plugin::Login;
                recover_p plugin: MKDoc::Auth::Plugin::Recover_Password"
>
  <head>
    <title>MKDoc::Auth - Login Recovery</title>
    <style
      media="screen"
      type="text/css"
      title="Screen style sheet"
      petal:content="string:@import url(/.resources/css/auth.css)\;"
    >@import "../../../css/auth.css";</style>
  </head>
  <body>
    <h1>MKDoc::Auth - Login Recovery</h1>

    <!--? report errors, if any ?-->
    <div metal:use-macro="../errors/#body">This is an error message.</div>

    <div petal:condition="true: self/is_post; true: self/matching_users">
      <p>
        <strong>A login reminder has been sent to
                <a href="mailto:${self/email}" petal:content="self/email">fred@example.com</a></strong>.
      </p>

      <p>Once you know your <a href="#" petal:attributes="href login_p/uri">login</a>
         information you can try to login. You can also <a href="#" petal:attributes="href recover_p/uri">recover
         your password</a> if you have forgotten it.</p>
      
    </div>

    <!--? display input form ?-->
    <div>
      <form petal:attributes="action self/uri" action="#" method="POST">
        <input type="hidden" name="return_uri" petal:attributes="value self/return_uri" />
        <table>
          <tr>
            <td>Email Address:</td>
            <td><input type="text" name="email" petal:attributes="value self/request/param --email" size="25" /></td>
          </tr>
        </table>

        <input type="submit" value="Send Email" />
      </form>
    </div>
  </body>
</html>
